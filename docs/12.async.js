(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{X3oe:function(e,a,t){"use strict";var l=t("g09b"),d=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("+L6B");var i=l(t("2/Rp"));t("P2fV");var s=l(t("NJEC"));t("/zsF");var r=l(t("PArb"));t("miYZ");var n=l(t("tsqr")),o=l(t("p0pE"));t("2qtc");var f=l(t("kLXV"));t("5NDa");var m=l(t("5rEg")),u=l(t("jehZ"));t("OaEy");var c=l(t("2fM7"));t("Pwec");var p=l(t("CtXQ"));t("y8nQ");var h,g,b,y,E,M,v=l(t("Vl3Y")),_=d(t("q1tI")),k=l(t("/L/i")),I=t("LLXN"),V=t("MuoO"),w=t("+n12"),C=t("Yfch"),x=l(t("uBsN")),O=(h=v.default.create(),h((b=class extends _.PureComponent{constructor(){super(...arguments),this.handleOk=(()=>{var e=this.props,a=e.form,t=e.handleSave;a.validateFieldsAndScroll((e,a)=>{if(!e){var l=a.face_file.map(e=>e.code);a.file_code=l||[],t(a)}})})}render(){var e=this.props,a=e.form.getFieldDecorator,t=e.handleModalVisible,l=e.modalVisible,d=e.mode,i=e.editInfo,s=e.loading_create,r=e.loading_update,n=e.typeData,o={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:14}}};return _.default.createElement(f.default,{destroyOnClose:!0,maskClosable:!1,title:d?_.default.createElement("span",null,_.default.createElement(p.default,{type:"plus"})," ",_.default.createElement(I.FormattedMessage,{id:"modal.title.add",values:{name:(0,I.formatMessage)({id:"face_recognition.face"})}})):_.default.createElement("span",null,_.default.createElement(p.default,{type:"edit"})," ",_.default.createElement(I.FormattedMessage,{id:"modal.title.edit",values:{name:(0,I.formatMessage)({id:"face_recognition.face"})}})),visible:l,onOk:this.handleOk,okButtonProps:{loading:d?s:r},onCancel:t,width:"50%"},_.default.createElement(v.default,null,_.default.createElement(v.default.Item,(0,u.default)({},o,{label:(0,I.formatMessage)({id:"label.type"})}),a("type_id",{initialValue:d?"":i.type_id,validateFirst:!0,rules:[{required:!0,message:(0,I.formatMessage)({id:"validation.type.required"})}]})(_.default.createElement(c.default,{disabled:!d,placeholder:(0,I.formatMessage)({id:"placeholder.select"}),allowClear:!0},n.map(e=>{return _.default.createElement(c.default.Option,{key:e.id,value:e.id},e.type_name)})))),_.default.createElement(v.default.Item,(0,u.default)({},o,{label:(0,I.formatMessage)({id:"label.name"})}),a("face_name",{initialValue:d?"":i.face_name,validateFirst:!0,rules:[{required:!0,whitespace:!1,message:(0,I.formatMessage)({id:"validation.name.required"})},{pattern:C.regTitle,message:(0,I.formatMessage)({id:"validation.name"})}]})(_.default.createElement(m.default,null))),_.default.createElement(v.default.Item,(0,u.default)({},o,{label:(0,I.formatMessage)({id:"label.avatar"})}),a("face_file",{valuePropName:"fileList",initialValue:d?[]:i.file_info,rules:[{required:!0,message:(0,I.formatMessage)({id:"validation.avatar.required"})}]})(_.default.createElement(x.default,{maxLimit:10,multiple:!0,data:{folder_name:"face",is_static:!0,is_compress:!0,is_thumb:!0}})))))}},g=b))||g),F=(y=(0,V.connect)(e=>{var a=e.face,t=e.loading;return{data:a.data,typeData:a.typeData,loading:t.effects["face/getList"],loading_create:t.effects["face/create"],loading_update:t.effects["face/update"]}}),y((M=class extends _.PureComponent{constructor(){super(...arguments),this.state={sortedInfo:{},filteredInfo:{},modalVisible:!1,modalMode:!0,editInfo:{}},this.bindRef=(e=>{this.child=e}),this.handleChange=((e,a)=>{this.setState({sortedInfo:(0,o.default)({},e),filteredInfo:(0,o.default)({},a)})}),this.handleDelete=(e=>{var a=this.props.dispatch;a({type:"face/delete",payload:{id:e},callback:()=>{n.default.success((0,I.formatMessage)({id:"msg.deleted"}))}})}),this.handleModalVisible=(()=>{this.setState({modalVisible:!this.state.modalVisible})}),this.handleModalOpen=(e=>{this.setState({modalMode:e,modalVisible:!this.state.modalVisible})}),this.handleEdit=(e=>{this.setState({editInfo:(0,o.default)({},e)},()=>{this.handleModalOpen(!1)})}),this.handleSave=(e=>{var a=this.props.dispatch,t=this.state,l=t.modalMode,d=t.editInfo;a({type:l?"face/create":"face/update",payload:l?e:Object.assign(e,{id:d.id}),callback:()=>{this.setState({modalVisible:!1}),n.default.success(l?(0,I.formatMessage)({id:"msg.created"}):(0,I.formatMessage)({id:"msg.updated"}))}})})}componentDidMount(){var e=this.props.dispatch;e({type:"face/getTypeList"})}render(){var e=this.props,a=e.data,t=e.loading,l=e.typeData,d=this.state.sortedInfo,n=[{title:(0,I.formatMessage)({id:"label.name"}),key:"face_name",dataIndex:"face_name",fixed:!0,width:260},{title:(0,I.formatMessage)({id:"label.avatar"}),key:"file_code",dataIndex:"file_code",width:100,fixed:!0,render:(e,a)=>{var t=a.file_info,l=null;return t&&t.length>0&&(l=_.default.createElement("div",null,t.map(e=>_.default.createElement("img",{key:e.id,onClick:()=>this.child.handleViews(e.id),src:e.src,className:"thumbnail"})))),l}},{title:(0,I.formatMessage)({id:"label.type"}),key:"type_name",dataIndex:"type_name",fixed:!0,width:260},{align:"center",title:(0,I.formatMessage)({id:"label.create-time"}),key:"create_time",dataIndex:"create_time",sorter:!0,sortOrder:"create_time"===d.columnKey&&d.order,render:e=>_.default.createElement("span",null,(0,w.formatTime)(e))},{title:(0,I.formatMessage)({id:"label.operation"}),key:"operation",fixed:"right",width:200,render:(e,a)=>_.default.createElement("div",null,a.is_system?null:_.default.createElement("span",null,_.default.createElement("a",{onClick:()=>this.handleEdit(a)},_.default.createElement(p.default,{type:"edit"})," ",_.default.createElement(I.FormattedMessage,{id:"label.edit"})),_.default.createElement(r.default,{type:"vertical"}),_.default.createElement(s.default,{placement:"topRight",icon:_.default.createElement(p.default,{type:"question-circle",className:"danger"}),okText:(0,I.formatMessage)({id:"button.yes"}),okType:"danger",cancelText:(0,I.formatMessage)({id:"button.no"}),title:_.default.createElement(I.FormattedMessage,{id:"reminder.delete",values:{name:(0,I.formatMessage)({id:"face_recognition.face"})}}),onConfirm:()=>this.handleDelete(a.id)},_.default.createElement("a",null,_.default.createElement(p.default,{type:"delete"})," ",_.default.createElement(I.FormattedMessage,{id:"label.delete"})))))}],o=_.default.createElement(_.default.Fragment,null,_.default.createElement(i.default,{type:"primary",icon:"plus",onClick:()=>this.handleModalOpen(!0)},_.default.createElement(I.FormattedMessage,{id:"button.add"}))),f={mode:this.state.modalMode,editInfo:this.state.editInfo,modalVisible:this.state.modalVisible,handleModalVisible:this.handleModalVisible,handleSave:this.handleSave,loading_create:this.props.loading_create,loading_update:this.props.loading_update,typeData:l};return _.default.createElement(_.Fragment,null,_.default.createElement(k.default,{loading:t,url:"face/getList",isView:!0,data:a,columns:n,buttons:o,rowKey:"id",onChange:this.handleChange,triggerRef:this.bindRef},_.default.createElement(k.default.QueryItem,{label:(0,I.formatMessage)({id:"label.name"}),name:"face_name"},_.default.createElement(m.default,{placeholder:(0,I.formatMessage)({id:"placeholder.input"})})),_.default.createElement(k.default.QueryItem,{label:(0,I.formatMessage)({id:"label.type"}),name:"type_id"},_.default.createElement(c.default,{placeholder:(0,I.formatMessage)({id:"placeholder.select"}),allowClear:!0},l.map(e=>{return _.default.createElement(c.default.Option,{key:e.id,value:e.id},e.type_name)})))),_.default.createElement(O,f))}},E=M))||E),q=F;a.default=q}}]);