(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"8aoI":function(e,a,t){"use strict";var l=t("g09b"),r=t("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("+L6B");var n=l(t("2/Rp"));t("7Kak");var s=l(t("9yH6"));t("5NDa");var i=l(t("5rEg")),u=l(t("jehZ")),d=l(t("d6i3"));t("miYZ");var m=l(t("tsqr")),f=l(t("1l/V"));t("y8nQ");var o,c,p,v,g=l(t("Vl3Y")),b=r(t("q1tI")),h=t("MuoO"),E=t("LLXN"),M=l(t("uBsN")),x=t("Yfch"),w=g.default.Item,y=(o=(0,h.connect)(e=>{var a=e.app;return{currentUser:a.currentUser}}),c=g.default.create(),o(p=c((v=class extends b.PureComponent{constructor(){var e;super(...arguments),e=this,this.handleSubmit=(a=>{a.preventDefault(),this.props.form.validateFields(function(){var a=(0,f.default)(d.default.mark(function a(t,l){var r,n,s,i;return d.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=8;break}return r=l.avatar_file[0],n=r?r.code:"",l.avatar_file=r,s=Object.assign(e.props.currentUser,l,{avatar:n}),i=e.props.dispatch,a.next=8,i({type:"app/updateCurrentUser",payload:s,callback:()=>{m.default.success((0,E.formatMessage)({id:"msg.saved"}))}});case 8:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())})}componentDidMount(){var e=this;return(0,f.default)(d.default.mark(function a(){return d.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(0!=Object.keys(e.props.currentUser).length){a.next=3;break}return a.next=3,e.props.dispatch({type:"app/getCurrentUser"});case 3:case"end":return a.stop()}},a)}))()}render(){var e=this.props.form.getFieldDecorator,a=this.props.currentUser,t={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return b.default.createElement("div",{style:{width:"600px"}},b.default.createElement("h2",null,b.default.createElement(E.FormattedMessage,{id:"menu.setting.base"})),b.default.createElement(g.default,{onSubmit:this.handleSubmit},b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.avatar"})}),e("avatar_file",{valuePropName:"fileList",initialValue:a.avatar_file?[a.avatar_file]:[]})(b.default.createElement(M.default,{maxLimit:1,data:{is_static:!0,folder_name:"avatar",is_thumb:!0}}))),b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.name-cn"})}),e("name_cn",{initialValue:a.name_cn,rules:[{required:!0,whitespace:!1,message:(0,E.formatMessage)({id:"validation.name-cn.required"})},{max:50,min:1,pattern:x.regNameCn,message:(0,E.formatMessage)({id:"validation.name-cn"})}]})(b.default.createElement(i.default,null))),b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.name-en"})}),e("name_en",{initialValue:a.name_en,rules:[{whitespace:!0,message:(0,E.formatMessage)({id:"validation.name-en.required"})},{max:50,min:1,pattern:x.regNameEn,message:(0,E.formatMessage)({id:"validation.name-en"})}]})(b.default.createElement(i.default,null))),b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.sex"})}),e("sex",{initialValue:a.sex,rules:[{required:!0}]})(b.default.createElement(s.default.Group,null,b.default.createElement(s.default,{value:1},b.default.createElement(E.FormattedMessage,{id:"label.sex.male"})),b.default.createElement(s.default,{value:2},b.default.createElement(E.FormattedMessage,{id:"label.sex.female"}))))),b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.mobile"})}),e("mobile",{initialValue:a.mobile,rules:[{required:!0,message:(0,E.formatMessage)({id:"validation.mobile.required"})},{pattern:x.regPhone,message:(0,E.formatMessage)({id:"validation.mobile"})}]})(b.default.createElement(i.default,null))),b.default.createElement(w,(0,u.default)({},t,{label:(0,E.formatMessage)({id:"label.email"})}),e("mail",{initialValue:a.mail,rules:[{type:"email",message:(0,E.formatMessage)({id:"validation.email"})}]})(b.default.createElement(i.default,null))),b.default.createElement(g.default.Item,{wrapperCol:{span:12,offset:6},style:{textAlign:"center"}},b.default.createElement(n.default,{type:"primary",htmlType:"submit"},b.default.createElement(E.FormattedMessage,{id:"button.save"})))))}},p=v))||p)||p),_=y;a.default=_}}]);